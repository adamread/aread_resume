<!DOCTYPE html>

<html>
<head>
    <script>
function trello_unhash(hash_value) {
    // This is a solution to the problem posted at
    // https://trello.com/jobs/internal-software-developer
    //
    // This solution works backwards through the hashing process. The code is
    // over-commented to provide insight into the process.

    var letters = ['a','c','d','e','g','i','l','m','n','o','p','r','s','t','u','w'];
    var orig_string = ""; // the string to return (i.e. the original string)
    var index; // the index of the current letter in the letters array

    // the hash function starts by giving the hash a value of 7. Working
    // backwards through the hash means that after the last letter is found, the
    // hash value should be 7 again.
    while (hash_value > 7) {
        // the hash function multiples the hash by 37 and adds a value. It
        // follows, that the current hash value modulo 37 will return the number
        // added after the multiplication.
        index = hash_value % 37;

        // the number added after multiplication is the index of the current
        // character in the list of possible letters.
        orig_string += letters[index];

        // the current letter is removed from the hash value and we continue
        hash_value = (hash_value - index) / 37;
    }

    // since the hash was worked through backwards, the string found is also
    // backwards.
    return orig_string.split('').reverse().join('');
}

function trello_process_form(hash_value) {
    var orig_string = trello_unhash(hash_value);
    var result_elem = document.getElementById("result");
    result_elem.innerText = orig_string;
}
    </script>

    <style>
    body {
        padding: 1%;
        font-family: sans-serif;
    }

    h1 {
        color: #0079BF;
    }

    .result {
        font-family: monospace;
        font-weight: bold;
        font-size: 1.5em;
    }
    </style>
</head>

<body>
    <h1>Trello Unhasher</h1>
    <!--
        There are more accessable ways to do this with a form and an output
        element that don't work in IE.
     -->
    <label for="val_to_hash">Hash Value</label>
    <input name="val_to_hash" id="val_to_hash" type="text" oninput="trello_process_form(val_to_hash.value)">
    <p>
        The orginal string was: <span name="result" id="result" class="result"></span>
    </p>

</body>

</html>
